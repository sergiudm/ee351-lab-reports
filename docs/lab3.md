### Lab3实验报告：轻触开关按键实验

#### 一、实验介绍
本实验旨在通过使用轻触开关作为输入设备，学习如何在Raspberry Pi上实现对硬件输入的检测。学生将了解如何配置GPIO引脚以读取开关状态，并根据该状态控制LED灯的颜色变化。此外，还将探讨如何通过编程实现按键功能的扩展，如多模式切换和按键抖动消除。

#### 二、实验原理
1. **轻触开关模块**：
   - 轻触开关内部有一个按钮，当按下时S引脚输出低电平（0V），松开后恢复高电平（通常为3.3V或5V）。这种特性使得它非常适合用作数字输入信号源。
   
2. **树莓派GPIO接口**：
   - Raspberry Pi的GPIO引脚可以被设置为输入或输出模式。对于本实验，我们将相关GPIO引脚设置为输入模式来接收来自轻触开关的状态信号。
   
3. **LED指示**：
   - 使用两种不同颜色的LED来指示按键的不同状态。例如，当按键按下时一个颜色亮起，而按键释放时另一个颜色亮起。

4. **按键抖动处理**：
   - 按键按下瞬间可能会产生电气噪声，导致多次触发。为了确保每次按键操作只触发一次事件，需要在软件层面加入去抖算法，比如设置一个短暂的时间延迟或者利用硬件RC滤波电路。

#### 三、实验步骤
1. **硬件连接**：
   - 根据提供的表格，将轻触开关的SIG(S)引脚连接到Raspberry Pi的GPIO17，VCC连接到5V电源，GND接地。同时，准备两个LED分别用于显示不同的按键状态。
   - 如果是双色LED，则可直接按照建议的方式插入T型板相应的GPIO19, GPIO20, GND三个引脚中；如果是单个LED，则需额外连线至GPIO27和GND。

2. **编写代码**：
   - 编写Python程序，首先导入RPi.GPIO库并初始化GPIO引脚。
   - 设置GPIO17为输入模式，并启用内部上拉电阻以确保未按下时保持高电平。
   - 定义回调函数用于响应按键按下事件，该函数会在检测到电平下降沿时调用。
   - 在主循环中持续监听按键状态的变化，并相应地改变LED的状态。

3. **测试与验证**：
   - 运行编写的Python脚本，尝试按下和释放轻触开关，观察LED是否正确响应。
   - 确认LED能够在按键按下时切换颜色，并且没有因为按键抖动而导致异常闪烁。

4. **功能扩展**：
   - 实现更复杂的逻辑，比如按一下红灯亮起，再按一下红灯闪烁，接着绿灯亮，最后绿灯闪烁，以此类推形成循环。
   - 注意保存最终版本的代码及视频记录，以便提交作业。

5. **清理工作**：
   - 实验结束后，请记得清理所有使用的GPIO引脚，并断开电源以保证安全。